<div class="sales-container">
  <ngx-loading
    [show]="isLoading"
    [config]="{ fullScreenBackdrop: true }"
  ></ngx-loading>
  <div class="topic">
    <span>{{ text.topic }}</span>
    <img
      [matTooltip]="text.tooltips.sales"
      matTooltipClass="mat-tooltip"
      src="../../assets/icons/info-circle-blue.svg"
      alt="info-circle-blue"
    />
  </div>
  <div class="group-sales-info">
    <div class="group-codename box">
      <div class="title">
        <span>{{ text.codeName }}</span>
        <img
          [matTooltip]="text.tooltips.codename"
          matTooltipClass="mat-tooltip"
          src="../../assets/icons/info-circle-blue.svg"
          alt="info-circle-blue"
        />
      </div>
      <div class="content">
        <span class="salesname">{{ data.salesData?.sale_code_name }}</span>
        <button (click)="onCopy()">
          <span>{{ text.copy_ }}</span>
        </button>
      </div>
    </div>
    <div class="group-codename box">
      <div class="title between">
        <div class="left">
          <span>{{ text.titleIncome }}</span>
          <img
            [matTooltip]="text.tooltips.balance"
            matTooltipClass="mat-tooltip"
            src="../../assets/icons/info-circle-blue.svg"
            alt="info-circle-blue"
          />
        </div>
        <div class="right">
          <!-- keep for other month select -->
        </div>
      </div>
      <div class="content">
        <span class="salesname">
          {{ data.salesData?.table_payment_in_month?.sales_in_month | number }}
          <span> {{ text.currency }} </span>
        </span>
        <span class="text-gray">
          {{
            text.balanceDate +
              " " +
              (data.rangeInMonth.startDate | date : "dd/MM/yyyy") +
              " - " +
              (data.rangeInMonth.endDate | date : "dd/MM/yyyy")
          }}
        </span>
      </div>
    </div>
    <div class="group-codename box">
      <div class="title">
        <span>{{ text.totalIncome }}</span>
        <img
          [matTooltip]="text.tooltips.totalbalance"
          matTooltipClass="mat-tooltip"
          src="../../assets/icons/info-circle-blue.svg"
          alt="info-circle-blue"
        />
      </div>
      <div class="content">
        <span class="salesname">
          {{ data.salesData?.total_sales | number }}
          <span> {{ text.currency }} </span>
        </span>
        <div class="group-button">
          <button
            [disabled]="data.salesData?.total_sales < data.withdraw_limit"
            (click)="withdrawButton()"
          >
            <span>{{ text.withdraw }}</span>
          </button>
          <span class="text-gray absolute mt-1">
            {{ text.withdrawn_note }}
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-info">
    <div class="scroll" [hidden]="isDelay">
      <a
        title="Scroll down"
        class="pointDown skrollable skrollable-between"
        data-anchor-target="#helper"
        style="opacity: 1"
      >
        <svg
          width="66"
          height="66"
          viewBox="0 0 66 66"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <circle cx="33" cy="33" r="33" fill="#E0F7FE" fill-opacity="0.9" />
          <path
            d="M30.4057 17.1172C27.8197 17.5703 25.6088 19.2266 24.4213 21.5938C24.1088 22.2109 23.7729 23.2969 23.6635 24.0312C23.5385 24.8906 23.6166 26.3906 23.8197 27.1719C24.3979 29.3984 25.8432 31.2812 27.8354 32.3906L28.2807 32.6406V35.9531C28.2807 37.7734 28.2572 39.2656 28.2338 39.2656C28.2025 39.2656 27.9213 39.0234 27.6088 38.7188C26.7182 37.875 25.9135 37.5469 24.726 37.5469C22.9135 37.5469 21.3588 38.6875 20.851 40.3984C20.5229 41.4844 20.6869 42.8516 21.2572 43.7578C21.39 43.9766 23.0697 45.7266 24.9916 47.6641L28.4916 51.1797L29.5697 53.6797C30.1557 55.0547 30.7104 56.2969 30.7963 56.4375C30.8822 56.5781 31.0854 56.7578 31.2572 56.8438C31.5463 56.9922 31.7494 57 38.7807 57C43.6947 57 46.0775 56.9766 46.226 56.9141C46.6869 56.7422 46.8666 56.4688 47.1869 55.4375C48.8041 50.2734 49.4525 45.2656 49.3588 38.625C49.3275 36.4766 49.3041 36.2188 49.1635 35.8203C48.5541 34.1719 46.9447 33.1875 45.3119 33.4688C45.0229 33.5156 44.7416 33.5781 44.6791 33.6016C44.601 33.6328 44.4916 33.4766 44.3119 33.0938C43.6635 31.7109 42.1088 30.8672 40.64 31.125C40.3432 31.1719 40.0463 31.2344 39.9838 31.2578C39.8979 31.2969 39.8197 31.1953 39.6947 30.8828C39.601 30.6484 39.351 30.2422 39.1479 29.9922L38.7729 29.5234L39.14 28.7656C40.6557 25.6797 40.0463 21.9453 37.6244 19.4844C36.5932 18.4375 35.1869 17.625 33.7885 17.2656C32.7963 17.0156 31.3666 16.9531 30.4057 17.1172ZM33.476 19.6094C35.1088 20.1406 36.4213 21.2891 37.1088 22.8125C37.4604 23.5938 37.601 24.2656 37.601 25.2031C37.5932 26.3672 37.3432 27.2734 36.7494 28.2578C36.5072 28.6562 36.4525 28.7031 36.1557 28.7422C35.9682 28.7734 35.7104 28.8125 35.5775 28.8438L35.3275 28.8906L35.2963 26.7188C35.265 24.7656 35.2416 24.4922 35.101 24.1016C34.0385 21.2188 30.2494 20.8594 28.726 23.4922C28.3119 24.2109 28.2807 24.4688 28.2807 27.2891V29.8984L27.9604 29.6406C27.2494 29.0703 26.4838 27.8906 26.1713 26.8828C25.9369 26.1406 25.8822 24.8203 26.0385 24.0547C26.4525 22.125 27.7416 20.5547 29.5229 19.8047C30.7494 19.2891 32.2572 19.2188 33.476 19.6094ZM32.4057 24.2422C32.515 24.3281 32.6791 24.4922 32.765 24.6094C32.9291 24.8203 32.9291 24.9141 32.9682 31.1016C33.0072 37.2969 33.0072 37.3828 33.1713 37.6016C33.6635 38.2656 34.5775 38.2266 35.1088 37.5156C35.265 37.3125 35.2729 37.1719 35.3119 34.5391C35.351 31.8984 35.3588 31.7656 35.515 31.5547C36.0072 30.8906 36.9213 30.9297 37.4525 31.6406C37.6088 31.8438 37.6166 31.9844 37.6557 34.6172C37.6947 37.2578 37.7025 37.3906 37.8588 37.6016C38.351 38.2656 39.265 38.2266 39.7963 37.5156C39.9447 37.3203 39.9604 37.1641 39.9994 35.7109C40.0385 34.2578 40.0541 34.1016 40.2025 33.8984C40.6947 33.2344 41.6088 33.2734 42.14 33.9844C42.2885 34.1797 42.3041 34.3359 42.3432 35.7734C42.3822 37.4375 42.4135 37.5625 42.7807 37.8516C43.476 38.3984 44.5307 37.9219 44.6479 37.0234C44.7494 36.2031 45.14 35.7891 45.8197 35.7891C46.2729 35.7891 46.5307 35.9297 46.8275 36.3281C46.9838 36.5391 46.9916 36.625 46.9838 39.9531C46.976 44.125 46.8588 45.8281 46.3588 48.8359C46.0463 50.7266 45.6322 52.4688 45.0307 54.5156C44.9916 54.6484 44.6244 54.6562 38.765 54.6562H32.5385L31.5229 52.2891L30.5072 49.9297L26.8666 46.2578C23.265 42.6328 23.2182 42.5781 23.0854 42.125C22.9682 41.7266 22.9604 41.6016 23.0463 41.2344C23.1557 40.75 23.5229 40.2812 23.9916 40.0391C24.3822 39.8438 25.0854 39.8438 25.5072 40.0391C25.7025 40.1328 26.3588 40.7344 27.226 41.6094C27.9994 42.3906 28.7729 43.1016 28.9369 43.1875C29.4604 43.4531 30.0229 43.2891 30.4213 42.75C30.5854 42.5391 30.5854 42.4688 30.6244 33.6406C30.6635 24.7969 30.6635 24.7422 30.8275 24.5234C31.1869 24.0312 31.9447 23.8984 32.4057 24.2422Z"
            fill="#01BFFB"
          />
          <g clip-path="url(#clip0_6811_29763)">
            <path
              d="M12.247 26.0005L14.727 28.2945C15.123 28.6845 15.123 29.3175 14.727 29.7085C14.332 30.0985 13.69 30.0985 13.295 29.7085L9.445 26.0605C9.157 25.7785 9 25.4035 9 25.0005C9 24.6005 9.158 24.2225 9.444 23.9405L13.294 20.2935C13.69 19.9035 14.332 19.9035 14.728 20.2935C15.123 20.6835 15.123 21.3165 14.728 21.7075L12.248 24.0005H24C24.553 24.0005 25 24.4465 25 25.0005C25 25.5505 24.552 26.0005 24 26.0005H12.246H12.247Z"
              fill="#01BFFB"
            />
          </g>
          <g clip-path="url(#clip1_6811_29763)">
            <path
              d="M51.753 26.0005L49.273 28.2945C48.877 28.6845 48.877 29.3175 49.273 29.7085C49.668 30.0985 50.31 30.0985 50.705 29.7085L54.555 26.0605C54.843 25.7785 55 25.4035 55 25.0005C55 24.6005 54.842 24.2225 54.556 23.9405L50.706 20.2935C50.31 19.9035 49.668 19.9035 49.272 20.2935C48.877 20.6835 48.877 21.3165 49.272 21.7075L51.752 24.0005H40C39.447 24.0005 39 24.4465 39 25.0005C39 25.5505 39.448 26.0005 40 26.0005H51.754H51.753Z"
              fill="#01BFFB"
            />
          </g>
          <defs>
            <clipPath id="clip0_6811_29763">
              <rect
                width="16"
                height="16"
                fill="white"
                transform="translate(9 17)"
              />
            </clipPath>
            <clipPath id="clip1_6811_29763">
              <rect
                width="16"
                height="16"
                fill="white"
                transform="matrix(-1 0 0 1 55 17)"
              />
            </clipPath>
          </defs>
        </svg>
      </a>
    </div>
    <div class="title">
      <div class="topic">
        <div class="left">
          <span>{{ text.customerList[0] }}</span>
        </div>
        <div class="right">
          <mat-select
            class="select-month"
            panelClass="month-dropdown"
            [formControl]="month"
          >
            <mat-option *ngFor="let item of monthsArray" [value]="item">
              {{ item }}
            </mat-option>
          </mat-select>
        </div>
      </div>
      <div class="info">
        <div class="view-panel">
          <button
            [style.background-color]="viewPanelStyleObj.list.background"
            [style.border-color]="viewPanelStyleObj.list.color"
            class="btn list"
            (click)="onClickViewPanel('list')"
          >
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M2 4.66406H14"
                [style.stroke]="viewPanelStyleObj.list.color"
                stroke-width="1.5"
                stroke-linecap="round"
              />
              <path
                d="M2 8H14"
                [style.stroke]="viewPanelStyleObj.list.color"
                stroke-width="1.5"
                stroke-linecap="round"
              />
              <path
                d="M2 11.3359H14"
                [style.stroke]="viewPanelStyleObj.list.color"
                stroke-width="1.5"
                stroke-linecap="round"
              />
            </svg>
            <span class="desktop" [style.color]="viewPanelStyleObj.list.color">
              {{ text.viewPanel.list }}
            </span>
          </button>
          <button
            [style.background-color]="viewPanelStyleObj.total.background"
            [style.border-color]="viewPanelStyleObj.total.color"
            class="btn total"
            (click)="onClickViewPanel('total')"
          >
            <svg
              width="15"
              height="15"
              viewBox="0 0 15 15"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.25 5.625V4.375C1.25 2.5 2.5 1.25 4.375 1.25H10.625C12.5 1.25 13.75 2.5 13.75 4.375V5.625"
                [style.stroke]="viewPanelStyleObj.total.color"
                stroke-width="1.5"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1.25 9.375V10.625C1.25 12.5 2.5 13.75 4.375 13.75H10.625C12.5 13.75 13.75 12.5 13.75 10.625V9.375"
                [style.stroke]="viewPanelStyleObj.total.color"
                stroke-width="1.5"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1.25 7.5H13.75"
                [style.stroke]="viewPanelStyleObj.total.color"
                stroke-width="1.5"
                stroke-miterlimit="10"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span class="desktop" [style.color]="viewPanelStyleObj.total.color">
              {{ text.viewPanel.total }}
            </span>
          </button>
        </div>
      </div>
    </div>
    <div class="sales-table">
      <table>
        <tr class="table-head">
          <th *ngFor="let header of text.table.header">{{ header }}</th>
        </tr>
        <tr
          *ngFor="
            let item of viewPanelStyleObj.current === 'total'
              ? data.salesDataTotal
              : data.salesData?.table_payment_in_month?.transaction;
            let i = index
          "
        >
          <td>{{ i + 1 | number : "2.0" }}</td>
          <td class="group">
            <img
              [src]="item.url_profile"
              alt="User Image"
              (error)="onImageError()"
            />
            <div class="right">
              <span>{{ item.username }}</span>
              <span class="sub">{{
                item.timestamp | date : "dd MMMM y HH:mm น."
              }}</span>
            </div>
          </td>

          <td>{{ (item.income | number) + " " + text.bath }}</td>
          <td>{{ (item.share | number) + " " + text.bath }}</td>
        </tr>
      </table>
    </div>
  </div>
</div>
<div [hidden]="!data.messageShow" class="popupAlert">
  <app-popup-bg
    class="alertTemplate"
    [index]="data.alreadyWithdraw"
  ></app-popup-bg>
</div>
<app-floating-message
  style="z-index: 100; position: absolute"
  [hidden]="!data.messangeFloating"
  [alertMessage]="data.floatingMessage"
></app-floating-message>

<!-- <div class="sales-container">
  <ngx-loading [show]="isLoading"></ngx-loading>
  <div class="title">
    <span>{{topic}}</span>
    <img matTooltip="{{tooltips.sales}}" src="../../assets/icons/info-circle-blue.svg" alt="info-circle-blue">
  </div>
  <div class="group-sales-info">
    <div class="group-codename">
      <div class="codename">

        <span class="salesname">
          <div class="loader"></div>
          {{salesname}}
        </span>
        <div class="codename-image tooltips">
          <span>
            {{codeName}}
          </span>
          <img style="padding-top: 5px;" matTooltip="{{tooltips.codename}}" src="../../assets/icons/info-circle-blue.svg" alt="info-circle-blue">
        </div>
      </div>
      <button
        (click)="onCopy()"
      >
        <span>{{copy_}}</span>

      </button>
    </div>
    <div class="group-income">
      <div class="group">
        <div class="monthly-income">
          <div class="title-income">
            <span>{{titleIncome}} : {{month}}</span>
            <img matTooltip="{{tooltips.balance}}" src="../../assets/icons/info-circle-blue.svg" alt="info-circle-blue">
          </div>
          <div class="income">
            <span>{{titleIncomeResult}}</span>
            <span>{{bath}}</span>
          </div>
          <span class="text-warnning">{{warning.incomeMonth}}</span>
        </div>
        <div class="vertical-line"></div>
        <div class="total-income">
          <div class="title-income">
            <span>{{totalIncome}}</span>
            <img matTooltip="{{tooltips.totalbalance}}" src="../../assets/icons/info-circle-blue.svg" alt="info-circle-blue">
          </div>
          <div class="income">
            <span>{{totalIncomeResult | number:'1.0':'en-US' }}</span>
            <span>{{bath}}</span>
          </div>
          <span class="text-warnning">{{warning.incomeWithdraw}}</span>
        </div>
      </div>
      <button
        [disabled]="totalIncomeResult <= (withdraw_limit)"
        (click)="withdrawButton()"
      >
        <span>{{withdraw}}</span>
      </button>
    </div>
  </div>
  <div class="dashboard-info">
    <div class="title">
      <div class="topic">
        {{customerList[0]}}<span>{{customerTotal[1]}} : {{month}}</span>
      </div>
      <div class="info">
        {{customerTotal[0]}} {{table.item.length| number:'1.0':'en-US' }} {{customerTotal[1]}}
      </div>

    </div>
    <div class="dataframe">
      <div class="header">
        <div class="row">
          <div class="col-sm2 obj-L">
            <div class="col-sm-2">{{table.header[0]}}</div>
          </div>
          <div class="col-sm10 obj-R">
            <div class="col-sm-5">{{table.header[1]}}</div>
            <div class="col-sm-3">{{table.header[2]}}</div>
            <div class="col-sm-2">{{table.header[3]}}</div>
          </div>
        </div>
      </div>
      <div class="line">
      </div>

      <div class="row">
        <div class="body">
          <div class="row" *ngFor="let item of table.item;index as i">
            <div class="col-sm2 obj-L">
              <div class="col-sm-2 colItem-1" *ngIf="i+1<10;else tens">
                0{{i+1}}</div>
                <ng-template #tens>{{i}}</ng-template>
            </div>
            <div class="col-sm10 obj-R">
                <div class="col-sm-5 colItem-2">
                  <div class="box">
                    <div class="icon" style="
                      background-image: url({{item.url_profile}});
                      background-size: contain;
                      "></div>
                    <div class="name">
                      <p style="
                        font-size: 12px;
                        color: #3D4652D9;
                        margin: -8px 0 -15px;
                        display: flex;
                      ">{{item.username}}</p>
                      <time>{{item.timestamp}}</time>
                    </div>

                  </div>
                </div>

                <div class="col-sm-3 colItem-3">{{item.income | number:'1.0':'en-US' }} {{bath}}</div>
                <div class="col-sm-2 colItem-4">{{item.share | number:'1.0':'en-US' }} {{bath}}</div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div [hidden]="!data.messageShow" class="popupAlert">
  <app-popup-bg class="alertTemplate" [index]="data.alreadyWithdraw"></app-popup-bg>
</div>
<app-floating-message style="z-index: 100;position: absolute;" [hidden]="!data.messangeFloating" [alertMessage]="floatingMessage"></app-floating-message>
 -->
